<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etude - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ß–µ–∫–∞–º–∏</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="login-page" class="page active">
        <div class="login-container">
            <h1>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
            <p>Etude</p>
            <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
            <button id="login-button">–í–æ–π—Ç–∏</button>
            <p id="login-error" class="error-message"></p>
        </div>
    </div>

    <div id="app" style="display: none;">
        <header>
            <div class="logo">Etude</div>
            <nav>
                <a href="#main" class="nav-link active">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="#all-checks" class="nav-link">–í—Å–µ —á–µ–∫–∏</a>
                <a href="#check" class="nav-link">–°–æ–∑–¥–∞—Ç—å —á–µ–∫</a>
                <a href="#clients" class="nav-link">–ö–ª–∏–µ–Ω—Ç—ã</a>
            </nav>
            <button id="logout-button">–í—ã–π—Ç–∏</button>
        </header>

        <main>
            <section id="main-page" class="page">
                <h2>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>–í—Å–µ–≥–æ —á–µ–∫–æ–≤</h3>
                        <p id="total-receipts-stat">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>–°—É–º–º–∞ –∑–∞ –º–µ—Å—è—Ü</h3>
                        <p id="monthly-revenue-stat">0.00 ‚Ç™</p>
                    </div>
                    <div class="stat-card">
                        <h3>–í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤</h3>
                        <p id="total-clients-stat">0</p>
                    </div>
                </div>
                <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —á–µ–∫–æ–≤</h3>
                <div class="table-container">
                    <table id="recent-checks-table">
                        <thead>
                            <tr>
                                <th>–ù–æ–º–µ—Ä</th>
                                <th>–î–∞—Ç–∞</th>
                                <th>–ö–ª–∏–µ–Ω—Ç</th>
                                <th>–°—É–º–º–∞</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="all-checks-page" class="page" style="display: none;">
                <h2>–í—Å–µ —á–µ–∫–∏</h2>
                <div class="filters">
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–ª–∏–µ–Ω—Ç—É –∏–ª–∏ –Ω–æ–º–µ—Ä—É...">
                    <input type="date" id="start-date-filter">
                    <input type="date" id="end-date-filter">
                    <button id="filter-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    <button id="export-csv-btn">–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</button>
                </div>
                <div class="table-container">
                    <table id="all-checks-table">
                        <thead>
                            <tr>
                                <th>–ù–æ–º–µ—Ä</th>
                                <th>–î–∞—Ç–∞</th>
                                <th>–ö–ª–∏–µ–Ω—Ç</th>
                                <th>–°—É–º–º–∞</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
                <div class="pagination">
                    </div>
            </section>

            <section id="check-page" class="page" style="display: none;">
                <h2 id="check-page-title">–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–µ–∫–∞</h2>
                <form id="check-form">
                    <div class="form-grid">
                        <div>
                            <label for="check-number">–ù–æ–º–µ—Ä —á–µ–∫–∞</label>
                            <input type="text" id="check-number" required>
                        </div>
                        <div>
                            <label for="check-date">–î–∞—Ç–∞</label>
                            <input type="date" id="check-date" required>
                        </div>
                        <div>
                            <label for="customer-select">–ö–ª–∏–µ–Ω—Ç</label>
                            <select id="customer-select" required></select>
                        </div>
                        <button type="button" id="add-new-client-from-check">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞</button>
                    </div>

                    <h4>–¢–æ–≤–∞—Ä—ã / –£—Å–ª—É–≥–∏</h4>
                    <table id="items-table">
                        <thead>
                            <tr>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                <th>–ö–æ–ª-–≤–æ</th>
                                <th>–¶–µ–Ω–∞ (‚Ç™)</th>
                                <th>–°—É–º–º–∞</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="items-tbody">
                            </tbody>
                    </table>
                    <button type="button" id="add-item-btn">+ –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É</button>

                    <div class="totals-section">
                        <div>–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∏—Ç–æ–≥: <span id="subtotal">0.00</span> ‚Ç™</div>
                        <div>–ù–î–° (18%): <span id="vat">0.00</span> ‚Ç™</div>
                        <div class="grand-total">–ò—Ç–æ–≥–æ: <span id="total">0.00</span> ‚Ç™</div>
                    </div>

                    <div>
                        <label for="payment-type">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
                        <select id="payment-type">
                            <option value="cash">–ù–∞–ª–∏—á–Ω—ã–µ</option>
                            <option value="credit_card">–ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞</option>
                            <option value="bank_transfer">–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="submit" id="save-check-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ–∫</button>
                    </div>
                </form>
            </section>
            
            <section id="view-check-page" class="page" style="display: none;">
                 <div class="view-check-actions">
                     <button id="print-check-btn">üñ®Ô∏è –ü–µ—á–∞—Ç—å / –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF</button>
                     <button id="back-to-all-checks-btn">–ù–∞–∑–∞–¥ –∫–æ –≤—Å–µ–º —á–µ–∫–∞–º</button>
                 </div>
                 <div id="check-preview-container">
                     </div>
            </section>


            <section id="clients-page" class="page" style="display: none;">
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏</h2>
                <div class="client-form-container">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å/–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</h3>
                    <form id="client-form">
                        <input type="hidden" id="client-id">
                        <input type="text" id="client-name" placeholder="–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞ –∏–≤—Ä–∏—Ç–µ)" required dir="rtl">
                        <input type="text" id="client-taxId" placeholder="ID / ◊¢.◊û.">
                        <input type="text" id="client-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
                        <input type="text" id="client-address" placeholder="–ê–¥—Ä–µ—Å" dir="rtl">
                        <textarea id="client-notes" placeholder="–ó–∞–º–µ—Ç–∫–∏"></textarea>
                        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
                        <button type="button" id="cancel-edit-client-btn" style="display:none;">–û—Ç–º–µ–Ω–∞</button>
                    </form>
                </div>
                <div class="table-container">
                    <input type="text" id="search-client-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º...">
                    <table id="clients-table">
                        <thead>
                            <tr>
                                <th>–ò–º—è</th>
                                <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                <th>–ê–¥—Ä–µ—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                           </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <script src="app.js"></script>
</body>
</html>